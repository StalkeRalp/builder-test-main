<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration Requise - TDE Group</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .container { background: white; border-radius: 12px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); max-width: 900px; width: 100%; overflow: hidden; }
        .header { background: linear-gradient(135deg, #4c1d95, #5b21b6); color: white; padding: 40px; text-align: center; }
        .header h1 { font-size: 32px; margin-bottom: 10px; }
        .header p { opacity: 0.9; font-size: 16px; }
        .content { padding: 40px; }
        .section { margin-bottom: 40px; }
        .section h2 { color: #1f2937; font-size: 22px; margin-bottom: 20px; border-bottom: 3px solid #4c1d95; padding-bottom: 10px; display: flex; align-items: center; gap: 10px; }
        .section h2 .icon { font-size: 24px; }
        .checklist { list-style: none; }
        .checklist li { padding: 12px 0; padding-left: 35px; position: relative; line-height: 1.6; }
        .checklist li:before { content: "‚úì"; position: absolute; left: 0; color: #10b981; font-weight: bold; font-size: 18px; }
        .code-block { background: #1f2937; color: #10b981; padding: 20px; border-radius: 8px; overflow-x: auto; font-family: 'Courier New', monospace; font-size: 13px; margin: 15px 0; line-height: 1.6; }
        .code-block.line { margin: 5px 0; }
        .alert { padding: 15px 20px; border-radius: 8px; margin: 20px 0; display: flex; gap: 15px; align-items: flex-start; }
        .alert.warning { background: #fef3c7; border-left: 4px solid #f59e0b; color: #92400e; }
        .alert.success { background: #d1fae5; border-left: 4px solid #10b981; color: #065f46; }
        .alert.info { background: #dbeafe; border-left: 4px solid #3b82f6; color: #1e40af; }
        .alert-icon { flex-shrink: 0; font-size: 20px; }
        .button-group { display: flex; gap: 10px; margin: 20px 0; flex-wrap: wrap; }
        .btn { padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; transition: 0.3s; font-size: 14px; }
        .btn-primary { background: linear-gradient(135deg, #4c1d95, #5b21b6); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(76,29,149,0.2); }
        .btn-secondary { background: #e5e7eb; color: #1f2937; }
        .btn-secondary:hover { background: #d1d5db; }
        .step { background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; margin: 15px 0; }
        .step h3 { color: #4c1d95; margin-bottom: 10px; font-size: 16px; }
        .step p { color: #4b5563; line-height: 1.6; margin-bottom: 10px; }
        .step p strong { color: #1f2937; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        table th, table td { padding: 12px; text-align: left; border-bottom: 1px solid #e5e7eb; }
        table th { background: #f3f4f6; font-weight: 600; color: #1f2937; }
        table tr:hover { background: #f9fafb; }
        .file-tag { display: inline-block; background: #f0f9ff; color: #0369a1; padding: 4px 8px; border-radius: 4px; font-family: monospace; font-size: 12px; margin: 0 4px; }
        .status-badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; }
        .status-badge.done { background: #d1fae5; color: #065f46; }
        .status-badge.pending { background: #fef3c7; color: #92400e; }
        .copy-btn { padding: 4px 12px; background: #4c1d95; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; }
        .copy-btn:hover { background: #5b21b6; }
        @media (max-width: 768px) {
            .header h1 { font-size: 24px; }
            .content { padding: 20px; }
            .button-group { flex-direction: column; }
            .btn { width: 100%; justify-content: center; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìã Configuration Requise</h1>
            <p>Syst√®me de Cr√©ation de Projet TDE Group - √âtapes de mise en place</p>
        </div>

        <div class="content">
            <!-- Section 1: Status -->
            <div class="section">
                <h2><span class="icon">‚ú®</span>√âtat du Syst√®me</h2>
                <table>
                    <tr>
                        <th>Composant</th>
                        <th>Status</th>
                        <th>Details</th>
                    </tr>
                    <tr>
                        <td>Frontend HTML</td>
                        <td><span class="status-badge done">‚úì PR√äT</span></td>
                        <td><span class="file-tag">admin/create-project.html</span> - Nouveau formulaire optimis√©</td>
                    </tr>
                    <tr>
                        <td>Backend JavaScript</td>
                        <td><span class="status-badge done">‚úì PR√äT</span></td>
                        <td><span class="file-tag">src/data-store.js</span> - M√©thode create() mise √† jour</td>
                    </tr>
                    <tr>
                        <td>Base de Donn√©es</td>
                        <td><span class="status-badge pending">‚ö† ACTION REQUISE</span></td>
                        <td>Ajouter colonnes project_manager et manager_email</td>
                    </tr>
                    <tr>
                        <td>Tests</td>
                        <td><span class="status-badge pending">‚è≥ √Ä FAIRE</span></td>
                        <td>Cr√©er et valider un projet de test</td>
                    </tr>
                </table>
            </div>

            <!-- Section 2: Migration SQL -->
            <div class="section">
                <h2><span class="icon">üîß</span>√âtape 1: Migration Base de Donn√©es</h2>
                
                <div class="alert warning">
                    <span class="alert-icon">‚ö†Ô∏è</span>
                    <div>
                        <strong>Important!</strong> Cette √©tape est REQUISE avant de tester la cr√©ation de projets. Les colonnes <strong>project_manager</strong> et <strong>manager_email</strong> doivent exister dans la base de donn√©es.
                    </div>
                </div>

                <div class="step">
                    <h3>üìç Option 1: Via Supabase Console (Recommand√©)</h3>
                    <ol style="margin-left: 20px; color: #4b5563; line-height: 2;">
                        <li>Allez sur: <strong>https://app.supabase.com</strong></li>
                        <li>Connectez-vous √† votre projet</li>
                        <li>Allez √†: <strong>SQL Editor</strong></li>
                        <li>Cliquez: <strong>New Query</strong></li>
                        <li>Collez le SQL ci-dessous:</li>
                    </ol>
                    <div class="code-block">
<span class="code-block line">-- Ajouter colonnes project_manager et manager_email</span>
<span class="code-block line">ALTER TABLE public.projects</span>
<span class="code-block line">ADD COLUMN IF NOT EXISTS project_manager TEXT DEFAULT NULL,</span>
<span class="code-block line">ADD COLUMN IF NOT EXISTS manager_email TEXT DEFAULT NULL;</span>
<span class="code-block line"></span>
<span class="code-block line">-- Cr√©er indexes pour performance</span>
<span class="code-block line">CREATE INDEX IF NOT EXISTS idx_projects_project_manager</span>
<span class="code-block line">ON public.projects(project_manager);</span>
<span class="code-block line"></span>
<span class="code-block line">CREATE INDEX IF NOT EXISTS idx_projects_manager_email</span>
<span class="code-block line">ON public.projects(manager_email);</span>
                    </div>
                    <button class="copy-btn" onclick="copyToClipboard()">üìã Copier le SQL</button>
                    <ol style="margin-left: 20px; color: #4b5563; line-height: 2; margin-top: 15px;">
                        <li>Cliquez: <strong>Run</strong> (ou Cmd/Ctrl + Enter)</li>
                        <li>Attendez le message: <strong>‚úì Success</strong></li>
                    </ol>
                </div>

                <div class="step">
                    <h3>üìç Option 2: Via fichier SQL</h3>
                    <ol style="margin-left: 20px; color: #4b5563; line-height: 2;">
                        <li>Ouvrez le fichier: <span class="file-tag">ADD_PROJECT_MANAGER_FIELDS.sql</span></li>
                        <li>Copiez tout le contenu</li>
                        <li>Allez √† Supabase SQL Editor</li>
                        <li>Cr√©ez une nouvelle requ√™te</li>
                        <li>Collez et ex√©cutez</li>
                    </ol>
                </div>

                <div class="alert success">
                    <span class="alert-icon">‚úì</span>
                    <div>
                        <strong>Succ√®s!</strong> Si vous voyez "Success", les colonnes sont ajout√©es et vous pouvez continuer.
                    </div>
                </div>
            </div>

            <!-- Section 3: Test de Cr√©ation -->
            <div class="section">
                <h2><span class="icon">üß™</span>√âtape 2: Tester la Cr√©ation de Projet</h2>

                <div class="step">
                    <h3>üìç D√©marrer l'application</h3>
                    <p>Dans le terminal:</p>
                    <div class="code-block">
<span class="code-block line">cd /home/stalker/Bureau/builder-test-main</span>
<span class="code-block line">npm run dev</span>
                    </div>
                    <p style="margin-top: 10px;">Attendez: <strong>"VITE v... ready in ... ms"</strong></p>
                </div>

                <div class="step">
                    <h3>üìç Se connecter</h3>
                    <ol style="margin-left: 20px; color: #4b5563; line-height: 2;">
                        <li>Allez √†: <strong>http://localhost:5173/admin/login.html</strong></li>
                        <li>Entrez vos identifiants admin</li>
                        <li>Cliquez: <strong>Se connecter</strong></li>
                    </ol>
                </div>

                <div class="step">
                    <h3>üìç Cr√©er un projet de test</h3>
                    <ol style="margin-left: 20px; color: #4b5563; line-height: 2;">
                        <li>Allez √†: <strong>http://localhost:5173/admin/create-project.html</strong></li>
                        <li>Remplissez le formulaire avec ces donn√©es:</li>
                    </ol>
                    <table style="margin-top: 15px;">
                        <tr>
                            <th>Champ</th>
                            <th>Valeur</th>
                        </tr>
                        <tr>
                            <td>Nom du Projet</td>
                            <td><strong>Test Project 001</strong></td>
                        </tr>
                        <tr>
                            <td>Type de Projet</td>
                            <td><strong>IT</strong></td>
                        </tr>
                        <tr>
                            <td>Description</td>
                            <td><strong>Projet de test pour valider le syst√®me</strong></td>
                        </tr>
                        <tr>
                            <td>Nom de l'Entreprise</td>
                            <td><strong>Test Client Inc.</strong></td>
                        </tr>
                        <tr>
                            <td>Email du Contact</td>
                            <td><strong>contact@testclient.com</strong></td>
                        </tr>
                        <tr>
                            <td>Chef de Projet</td>
                            <td><strong>Jean Dupont</strong></td>
                        </tr>
                        <tr>
                            <td>Email Chef de Projet</td>
                            <td><strong>jean@tdegroup.com</strong></td>
                        </tr>
                        <tr>
                            <td>Date de D√©but</td>
                            <td><strong>Aujourd'hui</strong></td>
                        </tr>
                        <tr>
                            <td>Date de Fin</td>
                            <td><strong>+30 jours</strong></td>
                        </tr>
                        <tr>
                            <td>Budget</td>
                            <td><strong>50000</strong></td>
                        </tr>
                    </table>
                    <ol style="margin-left: 20px; color: #4b5563; line-height: 2; margin-top: 15px;">
                        <li>UUID sera <strong>g√©n√©r√© automatiquement</strong></li>
                        <li>PIN sera <strong>g√©n√©r√© automatiquement</strong></li>
                        <li>Cliquez: <strong>"Cr√©er le Projet"</strong></li>
                    </ol>
                </div>

                <div class="step">
                    <h3>‚úì Validation du succ√®s</h3>
                    <ul style="margin-left: 20px; color: #4b5563; line-height: 2;">
                        <li>‚úì Voir le message: <strong>"‚úÖ Projet cr√©√© avec succ√®s!"</strong></li>
                        <li>‚úì √ätre redirig√© vers le dashboard en 2.5 secondes</li>
                        <li>‚úì Voir le nouveau projet dans la liste</li>
                    </ul>
                </div>
            </div>

            <!-- Section 4: V√©rification BDD -->
            <div class="section">
                <h2><span class="icon">üìä</span>√âtape 3: V√©rifier les Donn√©es en Base</h2>

                <div class="step">
                    <h3>üìç V√©rifier le projet cr√©√©</h3>
                    <ol style="margin-left: 20px; color: #4b5563; line-height: 2;">
                        <li>Allez √† Supabase Console</li>
                        <li>Allez √†: <strong>SQL Editor</strong></li>
                        <li>Cr√©ez une nouvelle requ√™te</li>
                        <li>Ex√©cutez ce SQL:</li>
                    </ol>
                    <div class="code-block">
<span class="code-block line">SELECT id, name, project_manager, manager_email, access_pin</span>
<span class="code-block line">FROM projects</span>
<span class="code-block line">ORDER BY created_at DESC</span>
<span class="code-block line">LIMIT 1;</span>
                    </div>
                    <p style="margin-top: 10px; color: #4b5563;"><strong>Vous devriez voir:</strong></p>
                    <ul style="margin-left: 20px; color: #4b5563; line-height: 2;">
                        <li>‚úì <strong>id:</strong> UUID g√©n√©r√© (ex: a1b2c3d4-...)</li>
                        <li>‚úì <strong>name:</strong> "Test Project 001"</li>
                        <li>‚úì <strong>project_manager:</strong> "Jean Dupont"</li>
                        <li>‚úì <strong>manager_email:</strong> "jean@tdegroup.com"</li>
                        <li>‚úì <strong>access_pin:</strong> 6 chiffres (ex: 123456)</li>
                    </ul>
                </div>
            </div>

            <!-- Section 5: Prochaines √©tapes -->
            <div class="section">
                <h2><span class="icon">üöÄ</span>Prochaines √âtapes</h2>

                <div class="alert info">
                    <span class="alert-icon">‚ÑπÔ∏è</span>
                    <div>
                        <strong>Syst√®me en production!</strong> Vous pouvez maintenant cr√©er des projets. Les identifiants UUID + PIN peuvent √™tre utilis√©s pour la connexion client (√† d√©velopper).
                    </div>
                </div>

                <ul class="checklist">
                    <li><strong>Phase 4:</strong> Cr√©er la page de login client (UUID + PIN)</li>
                    <li><strong>Phase 5:</strong> Impl√©menter le dashboard client</li>
                    <li><strong>Phase 6:</strong> Ajouter les notifications en temps r√©el</li>
                    <li><strong>Phase 7:</strong> D√©ployer en production</li>
                </ul>

                <div class="button-group" style="margin-top: 30px;">
                    <a href="http://localhost:5173/admin/create-project.html" class="btn btn-primary" target="_blank">
                        üöÄ Aller √† la page de cr√©ation
                    </a>
                    <a href="http://localhost:5173/admin/index.html" class="btn btn-primary" target="_blank">
                        üìä Aller au dashboard
                    </a>
                </div>
            </div>

            <!-- Section 6: Support -->
            <div class="section">
                <h2><span class="icon">üÜò</span>D√©pannage</h2>

                <div class="step">
                    <h3>‚ùå Erreur: "Column does not exist"</h3>
                    <p><strong>Solution:</strong> Les colonnes project_manager et manager_email n'existent pas. Ex√©cutez la migration SQL (√âtape 1).</p>
                </div>

                <div class="step">
                    <h3>‚ùå Erreur: "User not authenticated"</h3>
                    <p><strong>Solution:</strong> Reconnectez-vous sur la page de login (<strong>admin/login.html</strong>).</p>
                </div>

                <div class="step">
                    <h3>‚ùå UUID/PIN vides</h3>
                    <p><strong>Solution:</strong> Rafra√Æchissez la page (F5). S'ils restent vides, cliquez sur "G√©n√©rer".</p>
                </div>

                <div class="step">
                    <h3>‚ùå Le projet ne se cr√©e pas</h3>
                    <p><strong>Solution:</strong> Ouvrez la console (F12 ‚Üí Console). Cherchez les erreurs rouges. V√©rifiez que:</p>
                    <ul style="margin-left: 20px;">
                        <li>Tous les champs obligatoires sont remplis (marked with *)</li>
                        <li>UUID et PIN sont g√©n√©r√©s (non-vides)</li>
                        <li>Vous √™tes connect√©</li>
                    </ul>
                </div>
            </div>

            <!-- Fichiers -->
            <div class="section">
                <h2><span class="icon">üìÅ</span>Fichiers Modifi√©s/Cr√©√©s</h2>
                <table>
                    <tr>
                        <th>Fichier</th>
                        <th>Type</th>
                        <th>Status</th>
                    </tr>
                    <tr>
                        <td><span class="file-tag">admin/create-project.html</span></td>
                        <td>HTML + CSS + JS</td>
                        <td><span class="status-badge done">‚úì PR√äT</span></td>
                    </tr>
                    <tr>
                        <td><span class="file-tag">src/data-store.js</span></td>
                        <td>JavaScript (method update)</td>
                        <td><span class="status-badge done">‚úì PR√äT</span></td>
                    </tr>
                    <tr>
                        <td><span class="file-tag">ADD_PROJECT_MANAGER_FIELDS.sql</span></td>
                        <td>SQL Migration</td>
                        <td><span class="status-badge pending">‚è≥ √Ä EX√âCUTER</span></td>
                    </tr>
                    <tr>
                        <td><span class="file-tag">IMPLEMENTATION_SUMMARY.md</span></td>
                        <td>Documentation</td>
                        <td><span class="status-badge done">‚úì INFO</span></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <script>
        function copyToClipboard() {
            const sql = `-- Ajouter colonnes project_manager et manager_email
ALTER TABLE public.projects
ADD COLUMN IF NOT EXISTS project_manager TEXT DEFAULT NULL,
ADD COLUMN IF NOT EXISTS manager_email TEXT DEFAULT NULL;

-- Cr√©er indexes pour performance
CREATE INDEX IF NOT EXISTS idx_projects_project_manager
ON public.projects(project_manager);

CREATE INDEX IF NOT EXISTS idx_projects_manager_email
ON public.projects(manager_email);`;
            
            navigator.clipboard.writeText(sql).then(() => {
                alert('‚úì SQL copi√© dans le presse-papiers!');
            }).catch(() => {
                alert('Erreur lors de la copie. Copiez manuellement le SQL ci-dessus.');
            });
        }
    </script>
</body>
</html>
